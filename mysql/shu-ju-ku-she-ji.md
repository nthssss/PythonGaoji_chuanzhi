# 数据库设计
---
## 三范式
- 1NF：强调的是列的原子性，即列不能够再分成其他几列。
- 2NF：首先是 1NF，另外包含两部分内容，一是表必须有一个主键；二是没有包含在主键中的列必须完全依赖于主键，而不能只依赖于主键的一部分。
- 3NF：首先是 2NF，另外非主键列必须直接依赖于主键，不能存在传递依赖。即不能存在：非主键列 A 依赖于非主键列 B，非主键列 B 依赖于主键的情况。
## ER模型（entry-relationship）
- E表示entry，实体，设计实体就像定义一个类一样，指定从哪些方面描述对象，一个实体转换为数据库中的一个表
- R表示relationship，关系，关系描述两个实体之间的对应规则，关系的类型包括包括一对一、一对多、多对多

##如何取消外键约束


```
-- 需要先获取外键约束名称,该名称系统会自动生成,可以通过查看表创建语句来获取名称
show create table goods;
-- 获取名称之后就可以根据名称来删除外键约束
alter table goods drop foreign key 外键名称;
```
**在实际开发中,很少会使用到外键约束,外键约束会极大的降低表更新的效率**

- 应用场景的比较 互联网行业应用不推荐使用外键： 用户量大，并发度高，为此数据库服务器很容易成为性能瓶颈，尤其受IO能力限制，且不能轻易地水平扩展；若是把数据一致性的控制放到事务中，也即让应用服务器承担此部分的压力，而引用服务器一般都是可以做到轻松地水平的伸缩； 
传统行业（软件使用人数可控）的可以使用外键。
- 外键的性能问题 
1.数据库需要维护外键的内部管理； 
2.外键等于把数据的一致性事务实现，全部交给数据库服务器完成； 
3.有了外键，当做一些涉及外键字段的增，删，更新操作之后，需要触发相关操作去检查，而不得不消耗资源； 
4.外键还会因为需要请求对其他表内部加锁而容易出现死锁情况；

实际开发中情况往往是除了主键和非空约束外，其他的都不要，主要通过程序来控制外键关联！因此，实践和理论还是有差别的，但有一点却是不变的，那就是无论理论还是实践都是用来为实际需求服务的，也就是说“怎么好怎么来，要因时制宜，灵活变通。”
