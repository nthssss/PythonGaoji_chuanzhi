# 连接、自关联、子查询

## 连接

* 内连接：查询的结果为两个表匹配到的数据；
* 右连接：查询的结果为两个表匹配到的数据，右表特有的数据，对于左表中不存在的数据使用null填充 ；
* 左连接：查询的结果为两个表匹配到的数据，左表特有的数据，对于右表中不存在的数据使用null填充

```text
select * from 表1 inner或left或right join 表2 on 表1.列 = 表2.列
```

## 自关联

* 设计省信息的表结构provinces
  * id
  * ptitle
  * 设计市信息的表结构citys
* id
  * ctitle
  * proid
  * citys表的proid表示城市所属的省，对应着provinces表的id值

存储的都是地区信息，而且每种信息的数据量有限，没必要增加一个新表，或者将来还要存储区、乡镇信息，都增加新表的开销太大

合并：

* 因为省没有所属的省份，所以可以填写为null
* 城市所属的省份pid，填写省所对应的编号id
* 这就是自关联，表中的某一列，关联了这个表中的另外一列，但是它们的业务逻辑含义是不一样的，城市信息的pid引用的是省信息的id
* 在这个表中，结构不变，可以添加区县、乡镇街道、村社区等信息

```text
create table areas(
    aid int primary key,
    atitle varchar(20),
    pid int
);
```

## 子查询

语法

```text
主查询 where 条件 in (列子查询)
```

子查询：在一个 select 语句中,嵌入了另外一个 select 语句, 那么被嵌入的 select 语句称之为子查询语句 主查询：主要查询的对象,第一条 select 语句 子查询与主查询：

* 子查询是嵌入到主查询中
* 子查询是辅助主查询的,要么充当条件,要么充当数据源
* 子查询是可以独立存在的语句,是一条完整的 select 语句

  子查询分类：

* 标量子查询: 子查询返回的结果是一个数据\(一行一列\)
* 列子查询: 返回的结果是一列\(一列多行\)
* 行子查询: 返回的结果是一行\(一行多列\)

